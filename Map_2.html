<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2025-12-03" />

<title>Map-2</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/sandstone.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.3/leaflet.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="authors.html">About us</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="riding-bike.html">Bikes and Age</a>
</li>
<li>
  <a href="plotly.html">Plotly plots</a>
</li>
<li>
  <a href="mailto:&lt;dc3964@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/Bis-the-nub/citibike">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Map-2</h1>
<h4 class="date">2025-12-03</h4>

</div>


<pre class="r"><code>library(readr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(leaflet)
library(crosstalk)
library(rvest)
library(httr)
library(plotly)


data = read.csv(&quot;data/bike_data_combined.csv&quot;)

map_data = data |&gt;
  select(
    month,
    year,
    start_latitude = start_station_latitude, 
    start_longitude = start_station_longitude,
    end_latitude = end_station_latitude, 
    end_longitude = end_station_longitude) |&gt;
  filter(start_longitude &lt; -74.02, end_longitude &lt; -74.02)</code></pre>
<pre class="r"><code>station_counts = map_data |&gt;
  group_by(end_latitude, end_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )

pal = colorBin(
  palette = &quot;Spectral&quot;,
  domain  = station_counts$n_trips,
  bins    = 13,       
  pretty  = FALSE
)


# 2019 

# start stations
start_station_counts_2019 = map_data |&gt;
  filter(year == 2019) |&gt; 
  group_by(start_latitude, start_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )
leaflet(start_station_counts_2019) |&gt;
  addTiles() |&gt;
  setView(lng = -74.006, lat = 40.7128, zoom = 11) |&gt;
  addCircleMarkers(
    ~start_longitude, ~start_latitude,
    radius      = 8,
    stroke      = FALSE,
    fillColor   = ~pal(n_trips),
    fillOpacity = 0.8,
    label       = ~as.character(n_trips),
    labelOptions = labelOptions(
      direction = &quot;top&quot;,
      offset    = c(0, -5),
      textsize  = &quot;10px&quot;
    )
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-f4343f9354732411e451" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-f4343f9354732411e451">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.7162469,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73074262530658,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.03345880000001,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06378388404846,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],8,null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#9E0142","#CC364D","#CC364D","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#9E0142","#9E0142","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#CC364D","#CC364D","#EA5E48","#9E0142","#9E0142","#EAF79F","#CC364D","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#CC364D","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#CC364D","#EA5E48","#9E0142","#F98F52","#CC364D","#9E0142","#EA5E48","#9E0142","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142"],"fillOpacity":0.8},null,null,null,null,["43","1002","8499","10047","6244","2989","9096","1874","14189","6237","5302","3555","6793","9025","10179","1010","8583","8677","17875","3792","4363","46653","10013","10600","6666","7376","3240","9084","4026","8505","9815","3116","9005","7192","8174","3443","9677","17366","2238","24100","11167","2193","16888","2778","7681","2432","2579","1560","4738","1199","4805","2168","2268","2662"],{"interactive":false,"permanent":false,"direction":"top","opacity":1,"offset":[0,-5],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.0321082]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#end stations
end_station_counts_2019 = map_data |&gt;
  filter(year == 2019) |&gt; 
  group_by(end_latitude, end_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )

leaflet(end_station_counts_2019) |&gt;
  addTiles() |&gt;
  setView(lng = -74.006, lat = 40.7128, zoom = 11) |&gt;
  addCircleMarkers(
    ~end_longitude, ~end_latitude,
    radius      = 8,
    stroke      = FALSE,
    fillColor   = ~pal(n_trips),
    fillOpacity = 0.8,
    label       = ~as.character(n_trips),
    labelOptions = labelOptions(
      direction = &quot;top&quot;,
      offset    = c(0, -5),
      textsize  = &quot;10px&quot;
    )
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-24e0c12ee20054ae4139" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-24e0c12ee20054ae4139">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.7162469,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73074262530658,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.03345880000001,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06378388404846,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],8,null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#9E0142","#CC364D","#CC364D","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#9E0142","#9E0142","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#CC364D","#CC364D","#EA5E48","#9E0142","#9E0142","#BFE5A0","#CC364D","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#9E0142","#CC364D","#EA5E48","#9E0142","#F98F52","#CC364D","#9E0142","#EA5E48","#9E0142","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142"],"fillOpacity":0.8},null,null,null,null,["123","891","9197","8522","6510","2936","9967","1884","14157","6126","6536","3528","6948","11439","10649","1332","8751","7393","17916","3857","4282","58697","9996","11131","5949","7667","3028","8413","3674","7756","10014","3713","6821","4890","7411","2651","8344","17840","1679","22054","11335","2085","16141","2341","6771","1671","2133","1735","3288","1796","4414","1884","2059","2456"],{"interactive":false,"permanent":false,"direction":"top","opacity":1,"offset":[0,-5],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.0321082]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># 2020

# start stations
start_station_counts_2020 = map_data |&gt;
  filter(year == 2020) |&gt; 
  group_by(start_latitude, start_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )
leaflet(start_station_counts_2020) |&gt;
  addTiles() |&gt;
  setView(lng = -74.006, lat = 40.7128, zoom = 11) |&gt;
  addCircleMarkers(
    ~start_longitude, ~start_latitude,
    radius      = 8,
    stroke      = FALSE,
    fillColor   = ~pal(n_trips),
    fillOpacity = 0.8,
    label       = ~as.character(n_trips),
    labelOptions = labelOptions(
      direction = &quot;top&quot;,
      offset    = c(0, -5),
      textsize  = &quot;10px&quot;
    )
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ebf518c280c98469264d" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ebf518c280c98469264d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],8,null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#9E0142","#EA5E48","#CC364D","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#9E0142","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#9E0142","#F98F52","#CC364D","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#F98F52","#EA5E48","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142"],"fillOpacity":0.8},null,null,null,null,["1","1491","16932","9207","4410","3619","8061","2276","13612","5164","3327","10793","12577","9702","1622","7284","7299","12751","3545","3975","22921","9174","7865","4726","5338","3559","6075","4864","5485","8850","5339","5387","5731","4610","3345","5482","12851","1960","14710","19826","13661","3296","2972","1632","1743","4015","2358","1620","3385","1937","1120","3142"],{"interactive":false,"permanent":false,"direction":"top","opacity":1,"offset":[0,-5],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.0321082]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>#2020
#end stations
end_station_counts_2020 = map_data |&gt;
  filter(year == 2020) |&gt; 
  group_by(end_latitude, end_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )

leaflet(end_station_counts_2020) |&gt;
  addTiles() |&gt;
  setView(lng = -74.006, lat = 40.7128, zoom = 11) |&gt;
  addCircleMarkers(
    ~end_longitude, ~end_latitude,
    radius      = 8,
    stroke      = FALSE,
    fillColor   = ~pal(n_trips),
    fillOpacity = 0.8,
    label       = ~as.character(n_trips),
    labelOptions = labelOptions(
      direction = &quot;top&quot;,
      offset    = c(0, -5),
      textsize  = &quot;10px&quot;
    )
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-18742919b1083f7c7ad2" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-18742919b1083f7c7ad2">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],8,null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#9E0142","#EA5E48","#CC364D","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#9E0142","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#CC364D","#CC364D","#CC364D","#9E0142","#9E0142","#F98F52","#CC364D","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#CC364D","#9E0142","#EA5E48","#F98F52","#CC364D","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142","#9E0142"],"fillOpacity":0.8},null,null,null,null,["32","1493","17173","9213","4587","3858","8236","2443","13536","5313","3471","10969","12925","10317","1705","7393","7349","12730","3563","4021","26192","9375","8159","4616","5603","3303","6136","4622","5356","9052","5608","5186","4328","4492","2786","5154","12940","1804","14926","20004","12342","2542","2530","1353","1505","4112","1649","1628","3226","1762","1017","2992"],{"interactive":false,"permanent":false,"direction":"top","opacity":1,"offset":[0,-5],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.0321082]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>library(leaflet)
library(dplyr)
library(viridisLite)

covid_19_testing_centers = read_delim(&quot;data/covid_19_testing_centers.csv&quot;, delim = &quot;;&quot;) |&gt; 
  janitor::clean_names() |&gt; 
  select(latitude, longitude, location_name) |&gt;
  filter(longitude &lt; -74.02, longitude &gt; -74.08 , latitude &lt; 40.75 , latitude &gt; 40.71)

NJ_medical_centers = read_csv(&quot;data/NJ_medical_center.csv&quot;)

station_counts = map_data |&gt;
  group_by(end_latitude, end_longitude) |&gt;
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  )

bins = quantile(station_counts$n_trips,
                 probs = seq(0, 1, length.out = 6),
                 na.rm = TRUE)

pal = colorBin(
  palette = c(&quot;green&quot;, &quot;yellow&quot;, &quot;orange&quot;, &quot;red&quot;, &quot;darkred&quot;),
  domain  = station_counts$n_trips,
  bins    = bins,
  pretty  = FALSE
)</code></pre>
<pre class="r"><code># start station 2019

start_station_counts_2019 = map_data %&gt;%
  filter(year == 2019) %&gt;% 
  group_by(start_latitude, start_longitude) %&gt;%
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  ) 


leaflet() %&gt;%
  addTiles() %&gt;%
  setView(lng = -74.006, lat = 40.7128, zoom = 11) %&gt;%

  # Layer 1
  addCircleMarkers(
    data = start_station_counts_2019,
    lng = ~start_longitude,
    lat = ~start_latitude,
    radius = 7,
    fillColor = ~pal(n_trips),
    fillOpacity = 0.8,
    stroke = FALSE,
    label = ~paste(&quot;Trips:&quot;, n_trips),
    group = &quot;Bike Stations&quot;
  ) %&gt;%

  # Layer 2
  addCircleMarkers(
    data = covid_19_testing_centers,
    lng = ~longitude,
    lat = ~latitude,
    radius = 4,
    fillColor = &quot;darkblue&quot;,
    fillOpacity = 0.9,
    stroke = FALSE,
    label = ~location_name,
    group = &quot;COVID Centers&quot;
  ) %&gt;%
  
  # Layer3
  addMarkers(
    data = NJ_medical_centers,
    lng = ~longitude,
    lat = ~latitude,
    label = ~name,
    group = &quot;Medical Centers&quot;
  ) %&gt;%

  addLegend(
    pal = pal,
    values = start_station_counts_2019$n_trips,
    title = &quot;Start Stations (2019)&quot;,
    opacity = 1
  ) %&gt;%

  addLayersControl(
    overlayGroups = c(&quot;Bike Stations&quot;, &quot;COVID Centers&quot;, &quot;Medical Centers&quot;),
    options = layersControlOptions(collapsed = FALSE)
  )</code></pre>
<pre><code>## Warning in pal(n_trips): Some values were outside the color scale and will be
## treated as NA</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-1070ce213759c2c3fd09" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1070ce213759c2c3fd09">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.7162469,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73074262530658,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.03345880000001,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06378388404846,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],7,null,"Bike Stations",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#00FF00","#FFA500","#FFA500","#FFFF00","#00FF00","#FFA500","#00FF00","#FF0000","#FFFF00","#FFFF00","#00FF00","#FFFF00","#FFA500","#FFA500","#00FF00","#FFA500","#FFA500","#FF0000","#00FF00","#00FF00","#8B0000","#FFA500","#FFA500","#FFFF00","#FFFF00","#00FF00","#FFA500","#00FF00","#FFA500","#FFA500","#00FF00","#FFA500","#FFFF00","#FFA500","#00FF00","#FFA500","#FF0000","#00FF00","#8B0000","#FFA500","#00FF00","#FF0000","#00FF00","#FFFF00","#00FF00","#00FF00","#00FF00","#FFFF00","#00FF00","#FFFF00","#00FF00","#00FF00","#00FF00"],"fillOpacity":0.8},null,null,null,null,["Trips: 43","Trips: 1002","Trips: 8499","Trips: 10047","Trips: 6244","Trips: 2989","Trips: 9096","Trips: 1874","Trips: 14189","Trips: 6237","Trips: 5302","Trips: 3555","Trips: 6793","Trips: 9025","Trips: 10179","Trips: 1010","Trips: 8583","Trips: 8677","Trips: 17875","Trips: 3792","Trips: 4363","Trips: 46653","Trips: 10013","Trips: 10600","Trips: 6666","Trips: 7376","Trips: 3240","Trips: 9084","Trips: 4026","Trips: 8505","Trips: 9815","Trips: 3116","Trips: 9005","Trips: 7192","Trips: 8174","Trips: 3443","Trips: 9677","Trips: 17366","Trips: 2238","Trips: 24100","Trips: 11167","Trips: 2193","Trips: 16888","Trips: 2778","Trips: 7681","Trips: 2432","Trips: 2579","Trips: 1560","Trips: 4738","Trips: 1199","Trips: 4805","Trips: 2168","Trips: 2268","Trips: 2662"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[40.7311985492422,40.71116,40.73962,40.7425701663627,40.726383,40.73808,40.7120510070329,40.73833,40.7461998228205,40.7247202102105,40.7205877707083,40.736704108745,40.73129,40.7427509366833,40.7103771140709,40.7312064492432,40.72617,40.7189691109138,40.7331,40.7137523437725,40.7259819139678,40.71478,40.7356210088775],[-74.0634122598195,-74.03855,-74.02983,-74.0530711193792,-74.067538,-74.03512000000001,-74.0665173175145,-74.03025,-74.04956874442431,-74.0435891598198,-74.0447930868151,-74.07152600209621,-74.0654,-74.0510359021477,-74.07845490214871,-74.0550244733123,-74.04073,-74.0707297309325,-74.06542,-74.06916725976841,-74.07676745981981,-74.04313999999999,-74.07925902709771],4,null,"COVID Centers",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"darkblue","fillOpacity":0.9},null,null,null,null,["Pop Ups In Commercial Districts (SIDs)","Dr. Inna Riva Pharmacy Care","CityMD","Pershing Field Park","McGinley Square SID","Prompt MD Urgent Care","Berry Lane","Quest Diagnostics","Jeresy City Medical Center","TJ Stewart","Pop Ups In Commercial Districts (SIDs)","Mount Carmel R.C. Church","Quest Diagnostics","Pop Ups In Commercial Districts (SIDs)","Emmanuel Pentecostal Church","Hudson Gardens","Public Safety Headquarters","Pop Ups w/ Health Partners","CityMD","Arlington Gardens","Pop Ups In Commercial Districts (SIDs)","Prompt MD Urgent Care","Marion Gardens"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[40.716,40.734,40.716,40.717,40.719],[-74.05,-74.05,-74.039,-74.05200000000001,-74.05],null,null,"Medical Centers",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Jersey City Medical Center","Christ Hospital, Jersey City, NJ","Vanguard Medical Group","Jersey City Medical Center Outpatient Services at Colony Plaza","Jersey City Medical Center Foundation"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#00FF00","#FFFF00","#FFA500","#FF0000","#8B0000"],"labels":["155.0 &ndash; 4,660.6","4,660.6 &ndash; 7,771.2","7,771.2 &ndash; 12,891.0","12,891.0 &ndash; 19,322.4","19,322.4 &ndash; 84,889.0"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"bin","title":"Start Stations (2019)","extra":null,"layerId":null,"className":"info legend","group":null}]},{"method":"addLayersControl","args":[[],["Bike Stations","COVID Centers","Medical Centers"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.02983]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># start station 2020

start_station_counts_2020 = map_data %&gt;%
  filter(year == 2020) %&gt;% 
  group_by(start_latitude, start_longitude) %&gt;%
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  ) 


leaflet() %&gt;%
  addTiles() %&gt;%
  setView(lng = -74.006, lat = 40.7128, zoom = 11) %&gt;%

  # Layer 1
  addCircleMarkers(
    data = start_station_counts_2020,
    lng = ~start_longitude,
    lat = ~start_latitude,
    radius = 7,
    fillColor = ~pal(n_trips),
    fillOpacity = 0.8,
    stroke = FALSE,
    label = ~paste(&quot;Trips:&quot;, n_trips),
    group = &quot;Bike Stations&quot;
  ) %&gt;%

  # Layer 2
  addCircleMarkers(
    data = covid_19_testing_centers,
    lng = ~longitude,
    lat = ~latitude,
    radius = 4,
    fillColor = &quot;darkblue&quot;,
    fillOpacity = 0.9,
    stroke = FALSE,
    label = ~location_name,
    group = &quot;COVID Centers&quot;
  ) %&gt;%
  
  # Layer3
  addMarkers(
    data = NJ_medical_centers,
    lng = ~longitude,
    lat = ~latitude,
    label = ~name,
    group = &quot;Medical Centers&quot;
  ) %&gt;%

  addLegend(
    pal = pal,
    values = end_station_counts_2020$n_trips,
    title = &quot;Start Stations (2020)&quot;,
    opacity = 1
  ) %&gt;%

  addLayersControl(
    overlayGroups = c(&quot;Bike Stations&quot;, &quot;COVID Centers&quot;, &quot;Medical Centers&quot;),
    options = layersControlOptions(collapsed = FALSE)
  )</code></pre>
<pre><code>## Warning in pal(n_trips): Some values were outside the color scale and will be
## treated as NA</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-d8b56702cb71d29d4c71" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d8b56702cb71d29d4c71">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],7,null,"Bike Stations",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#00FF00","#FF0000","#FFA500","#00FF00","#00FF00","#FFA500","#00FF00","#FF0000","#FFFF00","#00FF00","#FFA500","#FFA500","#FFA500","#00FF00","#FFFF00","#FFFF00","#FFA500","#00FF00","#00FF00","#8B0000","#FFA500","#FFA500","#FFFF00","#FFFF00","#00FF00","#FFFF00","#FFFF00","#FFFF00","#FFA500","#FFFF00","#FFFF00","#FFFF00","#00FF00","#00FF00","#FFFF00","#FFA500","#00FF00","#FF0000","#8B0000","#FF0000","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00"],"fillOpacity":0.8},null,null,null,null,["Trips: 1","Trips: 1491","Trips: 16932","Trips: 9207","Trips: 4410","Trips: 3619","Trips: 8061","Trips: 2276","Trips: 13612","Trips: 5164","Trips: 3327","Trips: 10793","Trips: 12577","Trips: 9702","Trips: 1622","Trips: 7284","Trips: 7299","Trips: 12751","Trips: 3545","Trips: 3975","Trips: 22921","Trips: 9174","Trips: 7865","Trips: 4726","Trips: 5338","Trips: 3559","Trips: 6075","Trips: 4864","Trips: 5485","Trips: 8850","Trips: 5339","Trips: 5387","Trips: 5731","Trips: 4610","Trips: 3345","Trips: 5482","Trips: 12851","Trips: 1960","Trips: 14710","Trips: 19826","Trips: 13661","Trips: 3296","Trips: 2972","Trips: 1632","Trips: 1743","Trips: 4015","Trips: 2358","Trips: 1620","Trips: 3385","Trips: 1937","Trips: 1120","Trips: 3142"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[40.7311985492422,40.71116,40.73962,40.7425701663627,40.726383,40.73808,40.7120510070329,40.73833,40.7461998228205,40.7247202102105,40.7205877707083,40.736704108745,40.73129,40.7427509366833,40.7103771140709,40.7312064492432,40.72617,40.7189691109138,40.7331,40.7137523437725,40.7259819139678,40.71478,40.7356210088775],[-74.0634122598195,-74.03855,-74.02983,-74.0530711193792,-74.067538,-74.03512000000001,-74.0665173175145,-74.03025,-74.04956874442431,-74.0435891598198,-74.0447930868151,-74.07152600209621,-74.0654,-74.0510359021477,-74.07845490214871,-74.0550244733123,-74.04073,-74.0707297309325,-74.06542,-74.06916725976841,-74.07676745981981,-74.04313999999999,-74.07925902709771],4,null,"COVID Centers",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"darkblue","fillOpacity":0.9},null,null,null,null,["Pop Ups In Commercial Districts (SIDs)","Dr. Inna Riva Pharmacy Care","CityMD","Pershing Field Park","McGinley Square SID","Prompt MD Urgent Care","Berry Lane","Quest Diagnostics","Jeresy City Medical Center","TJ Stewart","Pop Ups In Commercial Districts (SIDs)","Mount Carmel R.C. Church","Quest Diagnostics","Pop Ups In Commercial Districts (SIDs)","Emmanuel Pentecostal Church","Hudson Gardens","Public Safety Headquarters","Pop Ups w/ Health Partners","CityMD","Arlington Gardens","Pop Ups In Commercial Districts (SIDs)","Prompt MD Urgent Care","Marion Gardens"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[40.716,40.734,40.716,40.717,40.719],[-74.05,-74.05,-74.039,-74.05200000000001,-74.05],null,null,"Medical Centers",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Jersey City Medical Center","Christ Hospital, Jersey City, NJ","Vanguard Medical Group","Jersey City Medical Center Outpatient Services at Colony Plaza","Jersey City Medical Center Foundation"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#00FF00","#FFFF00","#FFA500","#FF0000","#8B0000"],"labels":["155.0 &ndash; 4,660.6","4,660.6 &ndash; 7,771.2","7,771.2 &ndash; 12,891.0","12,891.0 &ndash; 19,322.4","19,322.4 &ndash; 84,889.0"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"bin","title":"Start Stations (2020)","extra":null,"layerId":null,"className":"info legend","group":null}]},{"method":"addLayersControl","args":[[],["Bike Stations","COVID Centers","Medical Centers"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.02983]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># end station 2019


end_station_counts_2019 = map_data %&gt;%
  filter(year == 2019) %&gt;% 
  group_by(end_latitude, end_longitude) %&gt;%
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  ) 


leaflet() %&gt;%
  addTiles() %&gt;%
  setView(lng = -74.006, lat = 40.7128, zoom = 11) %&gt;%

  # Layer 1
  addCircleMarkers(
    data = end_station_counts_2019,
    lng = ~end_longitude,
    lat = ~end_latitude,
    radius = 7,
    fillColor = ~pal(n_trips),
    fillOpacity = 0.8,
    stroke = FALSE,
    label = ~paste(&quot;Trips:&quot;, n_trips),
    group = &quot;Bike Stations&quot;
  ) %&gt;%

  # Layer 2
  addCircleMarkers(
    data = covid_19_testing_centers,
    lng = ~longitude,
    lat = ~latitude,
    radius = 4,
    fillColor = &quot;darkblue&quot;,
    fillOpacity = 0.9,
    stroke = FALSE,
    label = ~location_name,
    group = &quot;COVID Centers&quot;
  ) %&gt;%
  
  # Layer3
  addMarkers(
    data = NJ_medical_centers,
    lng = ~longitude,
    lat = ~latitude,
    label = ~name,
    group = &quot;Medical Centers&quot;
  ) %&gt;%

  addLegend(
    pal = pal,
    values = end_station_counts_2019$n_trips,
    title = &quot;End Stations (2019)&quot;,
    opacity = 1
  ) %&gt;%

  addLayersControl(
    overlayGroups = c(&quot;Bike Stations&quot;, &quot;COVID Centers&quot;, &quot;Medical Centers&quot;),
    options = layersControlOptions(collapsed = FALSE)
  )</code></pre>
<pre><code>## Warning in pal(n_trips): Some values were outside the color scale and will be
## treated as NA</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-a2ea1e9ebf185d15ffe0" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-a2ea1e9ebf185d15ffe0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.7162469,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73074262530658,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.03345880000001,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06378388404846,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],7,null,"Bike Stations",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#00FF00","#FFA500","#FFA500","#FFFF00","#00FF00","#FFA500","#00FF00","#FF0000","#FFFF00","#FFFF00","#00FF00","#FFFF00","#FFA500","#FFA500","#00FF00","#FFA500","#FFFF00","#FF0000","#00FF00","#00FF00","#8B0000","#FFA500","#FFA500","#FFFF00","#FFFF00","#00FF00","#FFA500","#00FF00","#FFFF00","#FFA500","#00FF00","#FFFF00","#FFFF00","#FFFF00","#00FF00","#FFA500","#FF0000","#00FF00","#8B0000","#FFA500","#00FF00","#FF0000","#00FF00","#FFFF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00"],"fillOpacity":0.8},null,null,null,null,["Trips: 123","Trips: 891","Trips: 9197","Trips: 8522","Trips: 6510","Trips: 2936","Trips: 9967","Trips: 1884","Trips: 14157","Trips: 6126","Trips: 6536","Trips: 3528","Trips: 6948","Trips: 11439","Trips: 10649","Trips: 1332","Trips: 8751","Trips: 7393","Trips: 17916","Trips: 3857","Trips: 4282","Trips: 58697","Trips: 9996","Trips: 11131","Trips: 5949","Trips: 7667","Trips: 3028","Trips: 8413","Trips: 3674","Trips: 7756","Trips: 10014","Trips: 3713","Trips: 6821","Trips: 4890","Trips: 7411","Trips: 2651","Trips: 8344","Trips: 17840","Trips: 1679","Trips: 22054","Trips: 11335","Trips: 2085","Trips: 16141","Trips: 2341","Trips: 6771","Trips: 1671","Trips: 2133","Trips: 1735","Trips: 3288","Trips: 1796","Trips: 4414","Trips: 1884","Trips: 2059","Trips: 2456"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[40.7311985492422,40.71116,40.73962,40.7425701663627,40.726383,40.73808,40.7120510070329,40.73833,40.7461998228205,40.7247202102105,40.7205877707083,40.736704108745,40.73129,40.7427509366833,40.7103771140709,40.7312064492432,40.72617,40.7189691109138,40.7331,40.7137523437725,40.7259819139678,40.71478,40.7356210088775],[-74.0634122598195,-74.03855,-74.02983,-74.0530711193792,-74.067538,-74.03512000000001,-74.0665173175145,-74.03025,-74.04956874442431,-74.0435891598198,-74.0447930868151,-74.07152600209621,-74.0654,-74.0510359021477,-74.07845490214871,-74.0550244733123,-74.04073,-74.0707297309325,-74.06542,-74.06916725976841,-74.07676745981981,-74.04313999999999,-74.07925902709771],4,null,"COVID Centers",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"darkblue","fillOpacity":0.9},null,null,null,null,["Pop Ups In Commercial Districts (SIDs)","Dr. Inna Riva Pharmacy Care","CityMD","Pershing Field Park","McGinley Square SID","Prompt MD Urgent Care","Berry Lane","Quest Diagnostics","Jeresy City Medical Center","TJ Stewart","Pop Ups In Commercial Districts (SIDs)","Mount Carmel R.C. Church","Quest Diagnostics","Pop Ups In Commercial Districts (SIDs)","Emmanuel Pentecostal Church","Hudson Gardens","Public Safety Headquarters","Pop Ups w/ Health Partners","CityMD","Arlington Gardens","Pop Ups In Commercial Districts (SIDs)","Prompt MD Urgent Care","Marion Gardens"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[40.716,40.734,40.716,40.717,40.719],[-74.05,-74.05,-74.039,-74.05200000000001,-74.05],null,null,"Medical Centers",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Jersey City Medical Center","Christ Hospital, Jersey City, NJ","Vanguard Medical Group","Jersey City Medical Center Outpatient Services at Colony Plaza","Jersey City Medical Center Foundation"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#00FF00","#FFFF00","#FFA500","#FF0000","#8B0000"],"labels":["155.0 &ndash; 4,660.6","4,660.6 &ndash; 7,771.2","7,771.2 &ndash; 12,891.0","12,891.0 &ndash; 19,322.4","19,322.4 &ndash; 84,889.0"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"bin","title":"End Stations (2019)","extra":null,"layerId":null,"className":"info legend","group":null}]},{"method":"addLayersControl","args":[[],["Bike Stations","COVID Centers","Medical Centers"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.02983]}},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code># end station 2020
end_station_counts_2020 = map_data %&gt;%
  filter(year == 2020) %&gt;% 
  group_by(end_latitude, end_longitude) %&gt;%
  summarise(
    n_trips = n(),
    .groups = &quot;drop&quot;
  ) 

bins = quantile(station_counts$n_trips,
                 probs = seq(0, 1, length.out = 6),
                 na.rm = TRUE)

pal = colorBin(
  palette = c(&quot;green&quot;, &quot;yellow&quot;, &quot;orange&quot;, &quot;red&quot;, &quot;darkred&quot;),
  domain  = station_counts$n_trips,
  bins    = bins,
  pretty  = FALSE
)


leaflet() %&gt;%
  addTiles() %&gt;%
  setView(lng = -74.006, lat = 40.7128, zoom = 11) %&gt;%

  # Layer 1
  addCircleMarkers(
    data = end_station_counts_2020,
    lng = ~end_longitude,
    lat = ~end_latitude,
    radius = 7,
    fillColor = ~pal(n_trips),
    fillOpacity = 0.8,
    stroke = FALSE,
    label = ~paste(&quot;Trips:&quot;, n_trips),
    group = &quot;Bike Stations&quot;
  ) %&gt;%

  # Layer 2
  addCircleMarkers(
    data = covid_19_testing_centers,
    lng = ~longitude,
    lat = ~latitude,
    radius = 4,
    fillColor = &quot;darkblue&quot;,
    fillOpacity = 0.9,
    stroke = FALSE,
    label = ~location_name,
    group = &quot;COVID Centers&quot;
  ) %&gt;%
  
  # Layer3
  addMarkers(
    data = NJ_medical_centers,
    lng = ~longitude,
    lat = ~latitude,
    label = ~name,
    group = &quot;Medical Centers&quot;
  ) %&gt;%

  addLegend(
    pal = pal,
    values = end_station_counts_2020$n_trips,
    title = &quot;End Stations (2020)&quot;,
    opacity = 1
  ) %&gt;%

  addLayersControl(
    overlayGroups = c(&quot;Bike Stations&quot;, &quot;COVID Centers&quot;, &quot;Medical Centers&quot;),
    options = layersControlOptions(collapsed = FALSE)
  )</code></pre>
<pre><code>## Warning in pal(n_trips): Some values were outside the color scale and will be
## treated as NA</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-a57e5a72c15da8d706c9" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-a57e5a72c15da8d706c9">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[40.70965083364061,40.71113,40.7112423,40.7124188237569,40.7127742,40.71346382669195,40.7141454,40.71435836870427,40.71458403535893,40.71517767732029,40.71649,40.71653978099194,40.71687,40.7177325,40.7182113,40.71835519823214,40.71848892,40.7192517,40.71928220070702,40.71942,40.71958611647166,40.7211236,40.72152515,40.72163014263835,40.72165072487999,40.72210378668603,40.72333158646436,40.7236589,40.7241765,40.7242941,40.7246050998869,40.72528910781132,40.7253399253558,40.72568548362901,40.72572613742557,40.72601172964625,40.7272235,40.72755146730012,40.727595966,40.7287448,40.73089709786179,40.7311689,40.73367,40.734785818,40.73496102000951,40.73520838045357,40.7376037,40.737711,40.742677141,40.7443187,40.74590996631558,40.74871594538023],[-74.06860113143921,-74.0789,-74.0557013,-74.03852552175522,-74.0364857,-74.06285852193832,-74.03355190000001,-74.06661093235016,-74.04281705617905,-74.03768330812454,-74.04105,-74.0496379137039,-74.03281,-74.043845,-74.0836394,-74.03891444206238,-74.047726625,-74.034234,-74.07126188278198,-74.05099,-74.04311746358871,-74.03805095,-74.04630454300001,-74.04996782541275,-74.04288411140442,-74.07145500183105,-74.04595255851744,-74.0641943,-74.05065639999999,-74.03548259999999,-74.07840594649315,-74.04557168483734,-74.06762212514877,-74.04879033565521,-74.07195925712585,-74.05038893222809,-74.0337589,-74.07106071710587,-74.04424731100001,-74.0321082,-74.06391263008118,-74.0575736,-74.0625,-74.050443636,-74.05950307846069,-74.04696375131607,-74.0524783,-74.06692099999999,-74.051788633,-74.0439909,-74.0572714805603,-74.04044330120087],7,null,"Bike Stations",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#808080","#00FF00","#FF0000","#FFA500","#00FF00","#00FF00","#FFA500","#00FF00","#FF0000","#FFFF00","#00FF00","#FFA500","#FF0000","#FFA500","#00FF00","#FFFF00","#FFFF00","#FFA500","#00FF00","#00FF00","#8B0000","#FFA500","#FFA500","#00FF00","#FFFF00","#00FF00","#FFFF00","#00FF00","#FFFF00","#FFA500","#FFFF00","#FFFF00","#00FF00","#00FF00","#00FF00","#FFFF00","#FF0000","#00FF00","#FF0000","#8B0000","#FFA500","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00","#00FF00"],"fillOpacity":0.8},null,null,null,null,["Trips: 32","Trips: 1493","Trips: 17173","Trips: 9213","Trips: 4587","Trips: 3858","Trips: 8236","Trips: 2443","Trips: 13536","Trips: 5313","Trips: 3471","Trips: 10969","Trips: 12925","Trips: 10317","Trips: 1705","Trips: 7393","Trips: 7349","Trips: 12730","Trips: 3563","Trips: 4021","Trips: 26192","Trips: 9375","Trips: 8159","Trips: 4616","Trips: 5603","Trips: 3303","Trips: 6136","Trips: 4622","Trips: 5356","Trips: 9052","Trips: 5608","Trips: 5186","Trips: 4328","Trips: 4492","Trips: 2786","Trips: 5154","Trips: 12940","Trips: 1804","Trips: 14926","Trips: 20004","Trips: 12342","Trips: 2542","Trips: 2530","Trips: 1353","Trips: 1505","Trips: 4112","Trips: 1649","Trips: 1628","Trips: 3226","Trips: 1762","Trips: 1017","Trips: 2992"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[40.7311985492422,40.71116,40.73962,40.7425701663627,40.726383,40.73808,40.7120510070329,40.73833,40.7461998228205,40.7247202102105,40.7205877707083,40.736704108745,40.73129,40.7427509366833,40.7103771140709,40.7312064492432,40.72617,40.7189691109138,40.7331,40.7137523437725,40.7259819139678,40.71478,40.7356210088775],[-74.0634122598195,-74.03855,-74.02983,-74.0530711193792,-74.067538,-74.03512000000001,-74.0665173175145,-74.03025,-74.04956874442431,-74.0435891598198,-74.0447930868151,-74.07152600209621,-74.0654,-74.0510359021477,-74.07845490214871,-74.0550244733123,-74.04073,-74.0707297309325,-74.06542,-74.06916725976841,-74.07676745981981,-74.04313999999999,-74.07925902709771],4,null,"COVID Centers",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"darkblue","fillOpacity":0.9},null,null,null,null,["Pop Ups In Commercial Districts (SIDs)","Dr. Inna Riva Pharmacy Care","CityMD","Pershing Field Park","McGinley Square SID","Prompt MD Urgent Care","Berry Lane","Quest Diagnostics","Jeresy City Medical Center","TJ Stewart","Pop Ups In Commercial Districts (SIDs)","Mount Carmel R.C. Church","Quest Diagnostics","Pop Ups In Commercial Districts (SIDs)","Emmanuel Pentecostal Church","Hudson Gardens","Public Safety Headquarters","Pop Ups w/ Health Partners","CityMD","Arlington Gardens","Pop Ups In Commercial Districts (SIDs)","Prompt MD Urgent Care","Marion Gardens"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[40.716,40.734,40.716,40.717,40.719],[-74.05,-74.05,-74.039,-74.05200000000001,-74.05],null,null,"Medical Centers",{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Jersey City Medical Center","Christ Hospital, Jersey City, NJ","Vanguard Medical Group","Jersey City Medical Center Outpatient Services at Colony Plaza","Jersey City Medical Center Foundation"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#00FF00","#FFFF00","#FFA500","#FF0000","#8B0000"],"labels":["155.0 &ndash; 4,660.6","4,660.6 &ndash; 7,771.2","7,771.2 &ndash; 12,891.0","12,891.0 &ndash; 19,322.4","19,322.4 &ndash; 84,889.0"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"bin","title":"End Stations (2020)","extra":null,"layerId":null,"className":"info legend","group":null}]},{"method":"addLayersControl","args":[[],["Bike Stations","COVID Centers","Medical Centers"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"setView":[[40.7128,-74.006],11,[]],"limits":{"lat":[40.70965083364061,40.74871594538023],"lng":[-74.0836394,-74.02983]}},"evals":[],"jsHooks":[]}</script>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
